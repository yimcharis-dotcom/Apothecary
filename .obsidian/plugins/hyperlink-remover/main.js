/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var y=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var H=(i,k)=>{for(var t in k)y(i,t,{get:k[t],enumerable:!0})},V=(i,k,t,a)=>{if(k&&typeof k=="object"||typeof k=="function")for(let l of x(k))!S.call(i,l)&&l!==t&&y(i,l,{get:()=>k[l],enumerable:!(a=T(k,l))||a.enumerable});return i};var B=i=>V(y({},"__esModule",{value:!0}),i);var R={};H(R,{default:()=>v});module.exports=B(R);var o=require("obsidian");function D(i){let k=i.trim();return!(k.match(/^https?:\/\//i)||k.match(/^[a-z][a-z0-9+.-]*:/i))}function b(i,k,t=[],a="both",l=!1,e=[]){let n="",s=0;for(;s<i.length;){if(i[s]==="["&&s+1<i.length&&i[s+1]==="["){let r=s+2,c=2;for(;r<i.length&&c>0;)i[r]==="["?c++:i[r]==="]"&&c--,r++;n+=i.slice(s,r),s=r;continue}if(i[s]==="!"&&s+1<i.length&&i[s+1]==="["&&s+2<i.length&&i[s+2]==="["){let r=s+3,c=2;for(;r<i.length&&c>0;)i[r]==="["?c++:i[r]==="]"&&c--,r++;n+=i.slice(s,r),s=r;continue}let d=i[s]==="!"&&s+1<i.length&&i[s+1]==="[",h=d?s+1:s;if(i[h]==="["){let r=h+1,c=1,m="";for(;r<i.length&&c>0;)i[r]==="["&&i[r-1]!=="\\"?c++:i[r]==="]"&&i[r-1]!=="\\"&&c--,c>0&&(m+=i[r]),r++;if(r<i.length&&i[r]==="("){let g=r+1,p=1,f="";for(;g<i.length&&p>0;)i[g]==="("?p++:i[g]===")"&&p--,p>0&&(f+=i[g]),g++;if(p===0){if(l){if(!e.some(w=>f.toLowerCase().includes(w.toLowerCase()))){n+=i.slice(s,g),s=g;continue}}else if(t.some(w=>f.toLowerCase().includes(w.toLowerCase()))){n+=i.slice(s,g),s=g;continue}if(!l){let u=D(f);if(!(a==="both"||a==="internal"&&u||a==="external"&&!u)){n+=i.slice(s,g),s=g;continue}}d?n+="":n+=k?m:"",s=g;continue}}}n+=i[s],s++}return n}function W(i,k,t=[],a=!1,l=[]){let e=i,n=/(!?)\[\[(.*?)\]\]/g;return e=e.replace(n,(s,d,h)=>{if(d)return"";if(a){if(!l.some(m=>(h.indexOf("|")!==-1?h.substring(0,h.indexOf("|")):h).toLowerCase()===m.toLowerCase()))return s}else if(t.some(m=>(h.indexOf("|")!==-1?h.substring(0,h.indexOf("|")):h).toLowerCase()===m.toLowerCase()))return s;let r=h.indexOf("|");return r!==-1?k?h.substring(r+1):h.substring(0,r):h}),e}var N={removeHyperlinks:!0,keepHyperlinkText:!0,hyperlinkType:"both",removeWikilinks:!0,keepWikilinkAliases:!0,hyperlinkWhitelist:"",wikilinkWhitelist:"",hyperlinkBlacklist:"",wikilinkBlacklist:""},v=class extends o.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new C(this.app,this)),this.addCommand({id:"remove-links-from-selection",name:"Remove links from selection",editorCallback:(t,a)=>{let l=t.getSelection();if(l){let e=this.processText(l);l!==e?(t.replaceSelection(e),new o.Notice("Links removed from selection")):new o.Notice("No links found in selection")}else new o.Notice("No text selected to remove links from")}}),this.addCommand({id:"remove-links-from-file",name:"Remove links from file",editorCallback:(t,a)=>{let l=t.getValue(),e=this.processText(l);l!==e?(t.setValue(e),new o.Notice("Links removed from file")):new o.Notice("No links found in the file")}}),this.addCommand({id:"remove-external-links-from-file",name:"Remove external links from file",editorCallback:(t,a)=>{let l=t.getValue(),e=this.processText(l,"external");l!==e?(t.setValue(e),new o.Notice("External links removed from file")):new o.Notice("No external links found in the file")}}),this.addCommand({id:"remove-internal-links-from-file",name:"Remove internal links from file",editorCallback:(t,a)=>{let l=t.getValue(),e=this.processText(l,"internal");l!==e?(t.setValue(e),new o.Notice("Internal links removed from file")):new o.Notice("No internal links found in the file")}}),this.addCommand({id:"remove-blacklisted-links-from-selection",name:"Remove blacklisted links from selection",editorCallback:(t,a)=>{let l=t.getSelection();if(l){let e=this.processText(l,void 0,!0);l!==e?(t.replaceSelection(e),new o.Notice("Blacklisted links removed from selection")):new o.Notice("No blacklisted links found in selection")}else new o.Notice("No text selected to remove links from")}}),this.addCommand({id:"remove-blacklisted-links-from-file",name:"Remove blacklisted links from file",editorCallback:(t,a)=>{let l=t.getValue(),e=this.processText(l,void 0,!0);l!==e?(t.setValue(e),new o.Notice("Blacklisted links removed from file")):new o.Notice("No blacklisted links found in the file")}}),this.registerEvent(this.app.workspace.on("editor-menu",(t,a,l)=>{t.addItem(e=>{e.setTitle("Remove links from selection").setIcon("unlink").setDisabled(!a.somethingSelected()).onClick(()=>{let n=a.getSelection(),s=this.processText(n);n!==s?(a.replaceSelection(s),new o.Notice("Links removed from selection")):new o.Notice("No links found in the selection")})})})),this.registerEvent(this.app.workspace.on("editor-menu",(t,a,l)=>{t.addItem(e=>{e.setTitle("Remove links from file").setIcon("unlink").onClick(()=>{let n=a.getValue(),s=this.processText(n);n!==s?(a.setValue(s),new o.Notice("Links removed from file")):new o.Notice("No links found in the file")})})}))}onunload(){}processText(t,a,l=!1){let e=t;if(l){let n=this.settings.hyperlinkBlacklist.split(",").map(d=>d.trim()).filter(d=>d.length>0),s=this.settings.wikilinkBlacklist.split(",").map(d=>d.trim()).filter(d=>d.length>0);if(n.length>0){let d=a||"both";e=b(e,this.settings.keepHyperlinkText,[],d,!0,n)}s.length>0&&(e=W(e,this.settings.keepWikilinkAliases,[],!0,s))}else{if(this.settings.removeHyperlinks||a){let n=this.settings.hyperlinkWhitelist.split(",").map(d=>d.trim()).filter(d=>d.length>0),s=a||this.settings.hyperlinkType;e=b(e,this.settings.keepHyperlinkText,n,s)}if(this.settings.removeWikilinks){let n=this.settings.wikilinkWhitelist.split(",").map(s=>s.trim()).filter(s=>s.length>0);e=W(e,this.settings.keepWikilinkAliases,n)}}return e}async loadSettings(){this.settings=Object.assign({},N,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},C=class extends o.PluginSettingTab{constructor(t,a){super(t,a);this.plugin=a}checkAndShowDisabledWarning(){!this.plugin.settings.removeHyperlinks&&!this.plugin.settings.removeWikilinks&&new o.Notice("\u26A0\uFE0F Warning: Both hyperlink and wikilink removal is disabled. The plugin is effectively disabled.",5e3)}display(){let{containerEl:t}=this;t.empty(),!this.plugin.settings.removeHyperlinks&&!this.plugin.settings.removeWikilinks&&t.createDiv({cls:"setting-item",attr:{style:"background-color: #ffeaa7; border: 1px solid #fdcb6e; border-radius: 4px; padding: 10px; margin-bottom: 15px;"}}).createEl("div",{text:"\u26A0\uFE0F Warning: Both hyperlink and wikilink removal is disabled. The plugin is effectively disabled.",attr:{style:"color: #e17055; font-weight: bold;"}}),t.createEl("h3",{text:"Hyperlinks"}),new o.Setting(t).setName("Remove Hyperlinks").setDesc("Remove markdown-style links [text](url) and images ![text](url)").addToggle(e=>e.setValue(this.plugin.settings.removeHyperlinks).onChange(async n=>{this.plugin.settings.removeHyperlinks=n,n||(this.plugin.settings.keepHyperlinkText=!1),await this.plugin.saveSettings(),this.display(),this.checkAndShowDisabledWarning()})),this.plugin.settings.removeHyperlinks&&(new o.Setting(t).setName("Hyperlink Type").setDesc("Choose which types of hyperlinks to remove from context menu. (command mode overrides this setting)").addDropdown(e=>e.addOption("both","Both Internal and External").addOption("internal","Internal Links Only").addOption("external","External Links Only").setValue(this.plugin.settings.hyperlinkType).onChange(async n=>{this.plugin.settings.hyperlinkType=n,await this.plugin.saveSettings()})),new o.Setting(t).setName("Keep Hyperlink Text").setDesc("When removing hyperlinks [text](url), keep the link text").addToggle(e=>e.setValue(this.plugin.settings.keepHyperlinkText).onChange(async n=>{this.plugin.settings.keepHyperlinkText=n,await this.plugin.saveSettings()})),new o.Setting(t).setName("Hyperlink Whitelist").setDesc("Comma-separated list of domains/URLs to never remove (e.g., wikipedia.org, github.com)").addText(e=>e.setPlaceholder("wikipedia.org, github.com").setValue(this.plugin.settings.hyperlinkWhitelist).onChange(async n=>{this.plugin.settings.hyperlinkWhitelist=n,await this.plugin.saveSettings()}))),t.createEl("h3",{text:"Wikilinks"}),new o.Setting(t).setName("Remove Wikilinks").setDesc("Remove Obsidian-style wikilinks [[link]] and image embeds ![[image]]").addToggle(e=>e.setValue(this.plugin.settings.removeWikilinks).onChange(async n=>{this.plugin.settings.removeWikilinks=n,n||(this.plugin.settings.keepWikilinkAliases=!1),await this.plugin.saveSettings(),this.display(),this.checkAndShowDisabledWarning()})),this.plugin.settings.removeWikilinks&&(new o.Setting(t).setName("Keep Wikilink Aliases").setDesc("When removing wikilinks with aliases [[link|alias]], keep the alias text").addToggle(e=>e.setValue(this.plugin.settings.keepWikilinkAliases).onChange(async n=>{this.plugin.settings.keepWikilinkAliases=n,await this.plugin.saveSettings()})),new o.Setting(t).setName("Wikilink Whitelist").setDesc("Comma-separated list of wikilink paths/names to never remove (e.g., important-note, folder/file)").addText(e=>e.setPlaceholder("important-note, templates/template").setValue(this.plugin.settings.wikilinkWhitelist).onChange(async n=>{this.plugin.settings.wikilinkWhitelist=n,await this.plugin.saveSettings()}))),t.createEl("h3",{text:"Blacklist Mode"});let l=t.createEl("div",{text:'This mode only removes links that match the specified domains/paths. Use the dedicated "Remove blacklisted links" commands to activate this mode.',attr:{style:"margin-bottom: 10px; color: var(--text-muted);"}});new o.Setting(t).setName("Hyperlink Blacklist").setDesc("Comma-separated list of domains/URLs to remove when using blacklist commands (e.g., facebook.com, twitter.com)").addText(e=>e.setPlaceholder("facebook.com, twitter.com").setValue(this.plugin.settings.hyperlinkBlacklist).onChange(async n=>{this.plugin.settings.hyperlinkBlacklist=n,await this.plugin.saveSettings()})),new o.Setting(t).setName("Wikilink Blacklist").setDesc("Comma-separated list of wikilink paths/names to remove when using blacklist commands (e.g., temporary-note, draft)").addText(e=>e.setPlaceholder("temporary-note, draft").setValue(this.plugin.settings.wikilinkBlacklist).onChange(async n=>{this.plugin.settings.wikilinkBlacklist=n,await this.plugin.saveSettings()}))}};

/* nosourcemap */